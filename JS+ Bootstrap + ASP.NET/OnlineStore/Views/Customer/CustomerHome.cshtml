
<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
<head>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width" />
    <title>CustomerMenu</title>
</head>
<h1 style="color:#375a7f">Customer Menu:</h1>
<table class="table table-striped table-hover ">
    <colgroup>
        <col style="width:190px">
    </colgroup>
    <tr>
        <td>Place Order:</td>
        <td><input id="OrderBtn" type="button" value="Click Here" class="btn btn-primary btn-xs" onclick="@("window.location.href='" + @Url.Action("Order", "Customer") + "'");" /></td>
    </tr>
    <tr>
        <td>Delete Order:</td>
        <td><input id="CancelBtn" type="button" value="Click Here" class="btn btn-default btn-xs" onclick="@("window.location.href='" + @Url.Action("DeleteOrder", "Customer") + "'");" /></td>
    </tr>
    <tr>
        <td>Edit PInfo:</td>
        <td><input type="button" value="Click Here" class="btn btn-primary btn-xs" onclick="@("window.location.href='" + @Url.Action("EditInfo", "User") + "'");" /></td>
    </tr>

    <tr>
        <td>Logout:</td>
        <td><input type="button" value="Click Here" class="btn btn-default btn-xs" onclick="Logout()" /></td>
    </tr>
</table>

<script language="javascript">
    var ProductsMsg = "";
    $.ajax({//instead of $.get
        url: '/Manager/GetProductsByJson',
        data: { Msg: "" },
        success: CheckIfProductExists
    });
    function CheckIfProductExists(json) {
        if (json.Products.length == 0) {
            ProductsMsg = "The Catalog is currently on Maintenance. Therefore You can't make an order!\n";
            $("#OrderBtn").prop('disabled', true);
        }
    }
    $.get("GetOpennedOrdersByJson", null, CheckIfOrderExists);
    function CheckIfOrderExists(Orders)
    {
        if (Orders.length == 0) {
            alert(ProductsMsg+'There are No Openned Orders!');
            $("#CancelBtn").prop('disabled', true);
        }
    }
    function Logout() {
        $.post("/Home/Logout", {});
        window.location.href = "/Home/Home";
    }
</script>
