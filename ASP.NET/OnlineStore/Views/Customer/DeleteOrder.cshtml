@model Project.ViewModels.OrderVM
@{
    Layout = null;
}

<!DOCTYPE html>
<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
<html>
<head>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width" />
    <title>DeleteOrder</title>
</head>
<body>
    <div>
        <h1><span style="color:#375a7f">Order List:</span></h1>
        <h5><span style="color:#375a7f">*Only Orders with Status="Openned" Could be Removed</span></h5>
        @{
            WebGrid grid = new WebGrid(Model.existOrders, rowsPerPage: 5,defaultSort:"OID",canSort:false);
        }
        <style type="text/css">
            .table {
                margin: 4px;
                border-collapse: collapse;
                width: 300px;
            }

            .header {
                background-color: gray;
                font-weight: bold;
                color: #375a7f;
            }

            .table th, .table td {
                border: 1px solid black;
                padding: 5px;
            }
        </style>

     @grid.GetHtml(
 
    tableStyle: "table", // applying style on grid.
 
    fillEmptyRows: true, 
    //show empty row when there is only one record on page to it will display all empty rows there.       
    headerStyle: "header", //applying style.
    
    footerStyle: "grid-footer", //applying style.
 
    mode: WebGridPagerModes.All, //paging to grid 
    firstText: "<< First",
    previousText: "< Prev",
    nextText: "Next >",
    lastText: "Last >>",
    
    columns: new[]  // colums in grid
    {
        grid.Column("OID","OrderID",canSort:false,format: @<text>@item.OID</text>), //the model fields to display
        grid.Column("Orderdate","Date",canSort:false,format: @<text>@item.Orderdate</text>),
        grid.Column("Totalprice","Total Price",canSort:false,format: @<text>@item.Totalprice</text>),
 
   })
        <h3><span style="color:#375a7f">Delete Order:</span></h3>
        <div id="AddStatus"></div>
        <br />

        <table class="table table-striped table-hover ">
            <colgroup>
                <col style="width:190px">
            </colgroup>
            <tr>
                <td>
                    Select Order:
                </td>
                <td>
                    <select id="OrdersSelect" style="color:gray">
                        <option id="@Model.existOrders[0].OID" selected="selected">@Model.existOrders[0].OID</option>
                        @for (int i = 1; i < Model.existOrders.Count;i++ )
                        {
                        @:<option id="@Model.existOrders[i].OID">@Model.existOrders[i].OID</option>
                        }
                    </select>
                </td>
            <tr>
                <td>
                    <input type="button" value="Return" class="btn btn-primary btn-xs" onclick="@("window.location.href='" + @Url.Action("CustomerHome", "Customer") + "'");" />
                </td>
                <td>
                    <input id="Submit" class="btn btn-primary btn-xs" type="button" value="Delete" onclick="PostData()" />
                </td>
            </tr>

        </table>
    </div>
</body>
</html>
<script language="javascript">
    function PostData()
    {
        $("#AddStatus").text("Deleting Order....");
        var sub = document.getElementById("Submit");
        $(sub).prop('disabled', true);
        var Data = document.getElementById("OrdersSelect");
        Data=parseInt(Data.options[Data.selectedIndex].text);
        $.post("/Customer/DeleteOrder", { oid: Data });
        window.location.href = "/Customer/CustomerHome";
    }
</script>

